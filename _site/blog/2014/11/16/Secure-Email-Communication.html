<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
   <title>Secure Email Communication</title>
   <meta name="author" content="Heinrich Hartmann"/>

   <!-- syntax highlighting CSS -->
   <link rel="stylesheet" href="/css/syntax.css" type="text/css"/>

   <!-- Homepage CSS -->
   <link rel="stylesheet" href="/css/screen.css" type="text/css" media="screen, projection"/>

   <!-- RSS feed -->
   <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml">

   <!-- Favicon -->
   <link rel="icon" type="image/png" href="/images/favicon.png">

   
   </head>
<body>

<div class="site">
  <div class="title">
    <a href="/">Heinrich Hartmann</a>
    <a class="extra" href="/opinion.html">opinion</a>
    <a class="extra" href="/consulting.html">consulting</a>
    <a class="extra" href="/about.html">about</a>
    <div class="social" style='float:right'>
      <!-- <div style='float:right'> -->
      <!--   <a href="http://eepurl.com/ccmH-T"><img src="/images/mail_icon.svg" width="25px"/></a> -->
      <!-- </div> -->
      <div style='float:right'>
        <a href="/feed.xml"><img src="/images/rss_icon.svg" width="25px" style="margin: 0 10px 0 0;"/></a>
      </div>
      <div style='float:right'>
        <a href="http://twitter.com/intent/follow?screen_name=HeinrichHartman"><img src="/images/twitter_icon.svg" width="25px" style="margin: 0 10px 0 0;"></a>
      </div>
    </div>
  </div>
  

  <div id="post">

  <!-- Title -->
  <h1> Secure Email Communication</h1>

  

  <!-- Meta -->
  
  <p class="meta">
    Written on 2014-11-16
    
    
  </p>
  
  <!-- Splash -->
  

  <!-- Post content -->
  <!-- # Secure Email Communication -->

<p>This note explains how to write and receive private email messages.
It will be updated in the future and is ultimately aimed at the
non-expert.</p>

<p>Sending emails is like sending postcards. Everybody who has access to
the transportation infrastructure has acceess to the contents. This
includes:</p>

<ul>
  <li>The email provider: E.g. Google, GMX, Web.de, …</li>
  <li>Your telecomunication provider: E.g. Telecom, O2, Verizon, Comcast, …</li>
  <li>Intelligence services: NSA, GCHQ, BND, …</li>
  <li>Your geeky roommate who set-up your wifi connection.</li>
</ul>

<p>You can either trust all of those people to treat your communication
confidential, or you can choose to protect yourself and your
constitutional rights to private communication.</p>

<p>The only real protection against infringement of email contents is
end-to-end encryption (E2EE). This means you encrypt yout messages
before sending and the receiver decrypts the message himself.  Here is
what wikipedia says about
<a href="http://en.wikipedia.org/wiki/End-to-end_encryption">E2EE</a>:</p>

<blockquote>
  <p>Typical server-based communications systems do not include
end-to-end encryption. These systems can only guarantee protection of
communications between clients and servers, not between the
communicating parties themselves.</p>

  <p>Examples of non-E2EE systems are
Google Talk, Yahoo Messenger, Facebook, and Dropbox. Some such
systems, for example LavaBit and SecretInk, have even described
themselves as offering “end-to-end” encryption when they do not. Some
systems which normally offer end-to-end encryption have been
discovered to contain a back door, which causes negotiation of the
encryption key between the communicating parties to be subverted, for
example Skype Voltage.</p>
</blockquote>

<p>The leading standard for email end-to-end encryption is
<a href="http://en.wikipedia.org/wiki/Pretty_Good_Privacy#OpenPGP">OpenPGP</a>.
An free-software implementation is available at <a href="https://www.gnupg.org/">GnuPG</a>.
Binary distributions are available for all popular operating systems:</p>

<ul>
  <li>Windows: <a href="http://www.gpg4win.org/index.html">GPG4win</a></li>
  <li>Mac: <a href="https://gpgtools.org/gpgsuite.html">GPG Suite</a></li>
  <li>Ubuntu Linux: <code class="highlighter-rouge">sudo apt-get install gnupg</code></li>
</ul>

<p>Unfortunately, GnuPG is not entirely easy to use.
Even worse, I was not able to find a good tutorial on the web which explains the basic use cases for the non-expert user.
<a href="https://twitter.com/matthew_d_green">Matthew Green</a> explained the problem very well for the <a href="http://www.newyorker.com/tech/elements/the-daunting-challenge-of-secure-e-mail">The New
Yorker</a>:</p>

<blockquote>
  <p>Encrypting e-mail is just hard. Before you can send your friend an encrypted message, she must first install the software, generate an encryption key pair, and deliver the public portion to you. You must then download and install that key on your own computer and verify that it’s the right key—not a fake one sent to trick you. You must repeat this process for everyone else you want to talk to. And that’s before sending a single message.</p>
</blockquote>

<p>Edward Snowden has recorded a famous
<a href="http://vimeo.com/56881481">video</a> in which he explains how to setup a
secure email account to Glenn Greenwald.</p>

<h2 id="sending-a-secure-messages-with-">Sending a Secure Messages with <Encrypt.to></Encrypt.to></h2>

<p>On the plus side, sending a secure message to somebody who has already
setup his GPG system, is actually very simple! I was very surprised to
learn that these steps can be entirely automated using web
technologies. Use the following form to write secure messages to me.</p>

<p><a href="https://encrypt.to/consulting@heinrichhartmann.com">https://encrypt.to/consulting@heinrichhartmann.com</a></p>

<p>What happens under the hood is explained in the next sections.</p>

<h2 id="sending-a-secure-message-with-gog">Sending a Secure Message with GOG</h2>

<p>If you want to sent a secure message to me via email, you have to (1)
get my public key (2) encrypt the message using gpg and my public key
(3) send the encrypted message to my email address.</p>

<p>My GPG Key is available on MIT’s public key repository <a href="http://pgp.mit.edu/pks/lookup?op=get&amp;search=0xBC5BECF3C359B5C2">pgp.mit.edu</a>
and on <a href="https://gist.github.com/HeinrichHartmann/b21454a20c6e103d1365">GitHub</a>.</p>

<p>In order to send an encrypted message to me you have to imort my public key, e.g. using:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ gpg --keyserver pgp.mit.edu --search-keys 'consulting@heinrichhartmann.com'
</code></pre></div></div>

<p>Then write your message store it as <code class="highlighter-rouge">message.txt</code>. Instead of a text
message, you can also use arbitrary files. Then encrypt the file
using the imported key:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ gpg --encrypt --armor --recipient consulting@heinrichhartmann.com message.txt
</code></pre></div></div>

<p>This creates a new file <code class="highlighter-rouge">message.txt.gpg</code> that you can now sent to me
in any way that you like. Email is fine, you can also put it into the
newspaper, nobody will be able to decrypt it except me, who created
the public key in the first place.</p>

<h2 id="fingerprints">Fingerprints</h2>

<p>It is theoretically possible, that someone intercepts your
communication and to the PGP server and sends a modified key. To make
sure you received the correct key, you can compute a fingerprint</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ gpg --fingerprint consulting@heinrichhartmann.com
</code></pre></div></div>

<p>and compare the output against the fingerprint provided by an
alternative channel, like phone, business cards, mail or twitter.
Does the output of the above command match with the content of <a href="https://twitter.com/HeinrichHartman/status/534009605567688705">this
tweet</a>?
Then you can be a bit more sure, that you have the my key and not a
modified copy. If you are paranoid, please give me a call and ask for
the fingerprint.</p>

<h2 id="coming-up-">Coming Up …</h2>

<ul>
  <li>How to use GPG with your mail client (e.g. <a href="https://github.com/dejavusecurity/OutlookPrivacyPlugin">Outlook Privacy Plugin</a>)</li>
  <li>How to create your own public key (cf. <a href="https://www.gnupg.org/gph/en/manual.html">GNUPG Manual</a>)</li>
</ul>

<h2 id="further-reading">Further Reading</h2>
<ul>
  <li><a href="https://www.madboa.com/geek/gpg-quickstart/">Paul Heinlein – GPG Quickstart</a></li>
  <li><a href="https://www.digitalocean.com/community/tutorials/how-to-use-gpg-to-encrypt-and-sign-messages-on-an-ubuntu-12-04-vps">Justin Ellingwood – How To Use GPG</a></li>
  <li><a href="https://www.gnupg.org/gph/en/manual.html">GNUPG Manual</a></li>
  <li><a href="http://vimeo.com/56881481">Edward Snowden – GPG for Grennwald</a></li>
  <li><a href="https://help.riseup.net/en/security/message-security/openpgp/best-practices">PGP Best Practices</a></li>
  <li><a href="https://emailselfdefense.fsf.org/en/">FSF – EMail Self Defense</a></li>
</ul>


  <br/>
  <em>View the version history of this post on <a href="https://github.com/HeinrichHartmann/HeinrichHartmann.github.io/commits/source/_posts/2014-11-16-Secure-Email-Communication.md">GitHub</a>.</em>
  <br/>
  <!-- Comments -->
  
    <em>Comments have been disabled until the dust around the GDPR settled.</em>
    <!-- <div id="disqus_thread"></div> -->
    <!-- <script type="text/javascript"> -->
    <!--   /* * * CONFIGURATION VARIABLES * * */ -->
    <!--   var disqus_shortname = 'heinrichhartmann'; -->
    <!--   /* * * DON'T EDIT BELOW THIS LINE * * */ -->
    <!--   (function() { -->
    <!--   var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; -->
    <!--   dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; -->
    <!--   (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); -->
    <!--   })(); -->
    <!-- </script> -->
    <!-- <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments</a></noscript> -->
  

</div>


  <div class="footer">
    <div class="contact">
      <p>
        Licensed under <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">CC-BY 4.0.</a>
        <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title" style="display:none">This blog</span>
        <span xmlns:cc="http://creativecommons.org/ns#" property="cc:attributionName" style="display:none">Heinrich Hartmann</span>
      </p>
    </div>
  </div>
</div>



<!-- Google Analytics -->

<!-- <script> -->
<!--   (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ -->
<!--   (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), -->
<!--   m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) -->
<!--   })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); -->

<!--   ga('create', 'UA-53959000-1', 'auto'); -->
<!--   ga('send', 'pageview'); -->
<!-- </script> -->

</body>
</html>
